<!DOCTYPE html>
<html lang="es">
  <          <button
            class="nav-button"
            data-section="categories">
            Categor√≠as
          </button>
          <button
            class="nav-button"
            data-section="analytics">
            An√°lisis
          </button>
          <button
            class="nav-button nav-button-secondary"
            data-section="tests">
            üß™ Tests
          </button>
        </nav>
      </div>
    </header>ta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0" />
    <title>Gesti√≥n de Productos - App ES6+</title>
    <link
      rel="stylesheet"
      href="styles.css" />
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com" />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="container">
        <h1 class="logo">
          <span class="logo-icon">üì¶</span>
          Gesti√≥n de Productos
        </h1>
        <nav class="nav">
          <button
            class="nav-button active"
            data-section="products">
            Productos
          </button>
          <button
            class="nav-button"
            data-section="categories">
            Categor√≠as
          </button>
          <button
            class="nav-button"
            data-section="stats">
            Estad√≠sticas
          </button>
          <button
            class="nav-button nav-button-secondary"
            data-section="tests">
            üß™ Tests
          </button>
        </nav>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <div class="container">
        <!-- Search and Filters -->
        <section class="toolbar">
          <div class="search-container">
            <div class="search-box">
              <input
                type="text"
                id="searchInput"
                placeholder="Buscar productos..."
                class="search-input" />
              <button
                class="search-button"
                id="searchButton">
                <span class="search-icon">üîç</span>
              </button>
            </div>
            <div class="filters">
              <select
                id="categoryFilter"
                class="filter-select">
                <option value="">Todas las categor√≠as</option>
              </select>
              <select
                id="sortFilter"
                class="filter-select">
                <option value="name">Ordenar por nombre</option>
                <option value="price">Ordenar por precio</option>
                <option value="stock">Ordenar por stock</option>
                <option value="date">Ordenar por fecha</option>
              </select>
            </div>
          </div>
          <div class="actions">
            <button
              class="btn btn-primary"
              id="addProductBtn">
              <span class="btn-icon">‚ûï</span>
              Agregar Producto
            </button>
            <button
              class="btn btn-secondary"
              id="exportBtn">
              <span class="btn-icon">üìÑ</span>
              Exportar
            </button>
          </div>
        </section>

        <!-- Product Grid -->
        <section class="products-section">
          <div class="products-header">
            <h2 class="section-title">Lista de Productos</h2>
            <div class="view-toggle">
              <button
                class="view-button active"
                data-view="grid">
                <span class="view-icon">‚äû</span>
              </button>
              <button
                class="view-button"
                data-view="list">
                <span class="view-icon">‚ò∞</span>
              </button>
            </div>
          </div>

          <!-- Loading State -->
          <div
            class="loading"
            id="loadingState">
            <div class="loading-spinner"></div>
            <p>Cargando productos...</p>
          </div>

          <!-- Empty State -->
          <div
            class="empty-state"
            id="emptyState"
            style="display: none">
            <div class="empty-icon">üì≠</div>
            <h3>No hay productos</h3>
            <p>Agrega tu primer producto para comenzar</p>
            <button
              class="btn btn-primary"
              onclick="document.getElementById('addProductBtn').click()">
              Agregar Producto
            </button>
          </div>

          <!-- Products Grid -->
          <div
            class="products-grid"
            id="productsGrid">
            <!-- Los productos se cargar√°n aqu√≠ din√°micamente -->
          </div>

          <!-- Pagination -->
          <div
            class="pagination"
            id="pagination">
            <button
              class="pagination-btn"
              id="prevBtn">
              ‚Üê Anterior
            </button>
            <div class="pagination-info">
              <span id="currentPage">1</span> de <span id="totalPages">1</span>
            </div>
            <button
              class="pagination-btn"
              id="nextBtn">
              Siguiente ‚Üí
            </button>
          </div>
        </section>
      </div>
    </main>

    <!-- Modal -->
    <div
      class="modal"
      id="modal">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3
            class="modal-title"
            id="modalTitle">
            Agregar Producto
          </h3>
          <button
            class="modal-close"
            id="modalClose">
            √ó
          </button>
        </div>
        <div
          class="modal-body"
          id="modalBody">
          <!-- El contenido del modal se cargar√° aqu√≠ -->
        </div>
      </div>
    </div>

    <!-- Notification Toast -->
    <div
      class="toast"
      id="toast">
      <div
        class="toast-icon"
        id="toastIcon"></div>
      <div
        class="toast-message"
        id="toastMessage"></div>
      <button
        class="toast-close"
        id="toastClose">
        √ó
      </button>
    </div>

    <!-- Floating Action Button (Mobile) -->
    <button
      class="fab"
      id="fabButton">
      <span class="fab-icon">‚ûï</span>
    </button>

    <!-- JavaScript -->
    <script
      type="module"
      src="src/app.js"></script>
    
    <!-- Tests (solo en desarrollo) -->
    <script type="module">
      // Importar tests solo en desarrollo
      import { runTests } from './tests/example-tests.js';
      import { runComponentTests } from './tests/component-tests.js';
      
      // Hacer disponibles globalmente
      window.runTests = runTests;
      window.runComponentTests = runComponentTests;
      
      // Configurar botones de tests
      document.addEventListener('DOMContentLoaded', () => {
        const testConsole = document.getElementById('testConsole');
        const runAllTestsBtn = document.getElementById('runAllTestsBtn');
        const runComponentTestsBtn = document.getElementById('runComponentTestsBtn');
        const runUnitTestsBtn = document.getElementById('runUnitTestsBtn');
        
        // Funci√≥n para capturar console.log en el √°rea de tests
        function captureConsoleOutput(testFunction) {
          const originalLog = console.log;
          const originalError = console.error;
          let output = '';
          
          console.log = (...args) => {
            output += args.join(' ') + '\n';
            originalLog(...args);
          };
          
          console.error = (...args) => {
            output += '‚ùå ERROR: ' + args.join(' ') + '\n';
            originalError(...args);
          };
          
          return testFunction().then(() => {
            console.log = originalLog;
            console.error = originalError;
            return output;
          });
        }
        
        // Ejecutar todos los tests
        runAllTestsBtn?.addEventListener('click', async () => {
          testConsole.innerHTML = '<p>üöÄ Ejecutando todos los tests...</p>';
          
          try {
            const output = await captureConsoleOutput(async () => {
              await runTests();
              await runComponentTests();
            });
            
            testConsole.innerHTML = `<pre>${output}</pre>`;
          } catch (error) {
            testConsole.innerHTML = `<p class="error">Error ejecutando tests: ${error.message}</p>`;
          }
        });
        
        // Ejecutar tests de componentes
        runComponentTestsBtn?.addEventListener('click', async () => {
          testConsole.innerHTML = '<p>üé® Ejecutando tests de componentes...</p>';
          
          try {
            const output = await captureConsoleOutput(runComponentTests);
            testConsole.innerHTML = `<pre>${output}</pre>`;
          } catch (error) {
            testConsole.innerHTML = `<p class="error">Error ejecutando tests de componentes: ${error.message}</p>`;
          }
        });
        
        // Ejecutar tests unitarios
        runUnitTestsBtn?.addEventListener('click', async () => {
          testConsole.innerHTML = '<p>‚ö° Ejecutando tests unitarios...</p>';
          
          try {
            const output = await captureConsoleOutput(runTests);
            testConsole.innerHTML = `<pre>${output}</pre>`;
          } catch (error) {
            testConsole.innerHTML = `<p class="error">Error ejecutando tests unitarios: ${error.message}</p>`;
          }
        });
      });
    </script>
  </body>
</html>
