<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0" />
    <title>Sistema de Inventario - Día 5</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet" />

    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" />

    <!-- Custom CSS -->
    <link
      rel="stylesheet"
      href="styles.css" />
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container">
        <a
          class="navbar-brand"
          href="#">
          <i class="bi bi-box-seam"></i> Sistema de Inventario
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse"
          id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a
                class="nav-link active"
                href="#"
                onclick="mostrarSeccion('dashboard')">
                <i class="bi bi-speedometer2"></i> Dashboard
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                onclick="mostrarSeccion('productos')">
                <i class="bi bi-box"></i> Productos
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                onclick="mostrarSeccion('categorias')">
                <i class="bi bi-tags"></i> Categorías
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                onclick="mostrarSeccion('proveedores')">
                <i class="bi bi-truck"></i> Proveedores
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                onclick="mostrarSeccion('reportes')">
                <i class="bi bi-graph-up"></i> Reportes
              </a>
            </li>
          </ul>
          <ul class="navbar-nav">
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="navbarDropdown"
                role="button"
                data-bs-toggle="dropdown">
                <i class="bi bi-gear"></i> Configuración
              </a>
              <ul class="dropdown-menu">
                <li>
                  <a
                    class="dropdown-item"
                    href="#"
                    onclick="exportarDatos()">
                    <i class="bi bi-download"></i> Exportar Datos
                  </a>
                </li>
                <li>
                  <a
                    class="dropdown-item"
                    href="#"
                    onclick="importarDatos()">
                    <i class="bi bi-upload"></i> Importar Datos
                  </a>
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a
                    class="dropdown-item text-danger"
                    href="#"
                    onclick="limpiarDatos()">
                    <i class="bi bi-trash"></i> Limpiar Todo
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Container Principal -->
    <div class="container mt-4">
      <!-- Dashboard -->
      <div
        id="dashboard"
        class="seccion">
        <div class="row">
          <div class="col-12">
            <h2><i class="bi bi-speedometer2"></i> Dashboard</h2>
            <p class="text-muted">Resumen general del inventario</p>
          </div>
        </div>

        <!-- Tarjetas de Estadísticas -->
        <div class="row mb-4">
          <div class="col-md-3">
            <div class="card text-white bg-primary">
              <div class="card-body">
                <div class="d-flex justify-content-between">
                  <div>
                    <h5 class="card-title">Productos</h5>
                    <h3 id="totalProductos">0</h3>
                  </div>
                  <div class="align-self-center">
                    <i class="bi bi-box fs-1"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card text-white bg-success">
              <div class="card-body">
                <div class="d-flex justify-content-between">
                  <div>
                    <h5 class="card-title">Categorías</h5>
                    <h3 id="totalCategorias">0</h3>
                  </div>
                  <div class="align-self-center">
                    <i class="bi bi-tags fs-1"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card text-white bg-warning">
              <div class="card-body">
                <div class="d-flex justify-content-between">
                  <div>
                    <h5 class="card-title">Proveedores</h5>
                    <h3 id="totalProveedores">0</h3>
                  </div>
                  <div class="align-self-center">
                    <i class="bi bi-truck fs-1"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card text-white bg-info">
              <div class="card-body">
                <div class="d-flex justify-content-between">
                  <div>
                    <h5 class="card-title">Valor Total</h5>
                    <h3 id="valorTotal">$0</h3>
                  </div>
                  <div class="align-self-center">
                    <i class="bi bi-currency-dollar fs-1"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Productos con Bajo Stock -->
        <div class="row">
          <div class="col-md-6">
            <div class="card">
              <div class="card-header">
                <h5>
                  <i class="bi bi-exclamation-triangle"></i> Productos con Bajo
                  Stock
                </h5>
              </div>
              <div class="card-body">
                <div
                  id="bajoStock"
                  class="list-group">
                  <!-- Se llena dinámicamente -->
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card">
              <div class="card-header">
                <h5><i class="bi bi-clock-history"></i> Actividad Reciente</h5>
              </div>
              <div class="card-body">
                <div
                  id="actividadReciente"
                  class="list-group">
                  <!-- Se llena dinámicamente -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Productos -->
      <div
        id="productos"
        class="seccion"
        style="display: none">
        <div class="row">
          <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h2><i class="bi bi-box"></i> Gestión de Productos</h2>
              <button
                class="btn btn-primary"
                onclick="abrirModalProducto()">
                <i class="bi bi-plus-circle"></i> Nuevo Producto
              </button>
            </div>
          </div>
        </div>

        <!-- Filtros y Búsqueda -->
        <div class="row mb-3">
          <div class="col-md-4">
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-search"></i></span>
              <input
                type="text"
                class="form-control"
                id="buscarProducto"
                placeholder="Buscar productos..." />
            </div>
          </div>
          <div class="col-md-3">
            <select
              class="form-select"
              id="filtroCategoria">
              <option value="">Todas las categorías</option>
            </select>
          </div>
          <div class="col-md-3">
            <select
              class="form-select"
              id="filtroProveedor">
              <option value="">Todos los proveedores</option>
            </select>
          </div>
          <div class="col-md-2">
            <button
              class="btn btn-outline-secondary"
              onclick="limpiarFiltros()">
              <i class="bi bi-x-circle"></i> Limpiar
            </button>
          </div>
        </div>

        <!-- Tabla de Productos -->
        <div class="card">
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-striped table-hover">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Categoría</th>
                    <th>Precio</th>
                    <th>Stock</th>
                    <th>Proveedor</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody id="tablaProductos">
                  <!-- Se llena dinámicamente -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Categorías -->
      <div
        id="categorias"
        class="seccion"
        style="display: none">
        <div class="row">
          <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h2><i class="bi bi-tags"></i> Gestión de Categorías</h2>
              <button
                class="btn btn-success"
                onclick="abrirModalCategoria()">
                <i class="bi bi-plus-circle"></i> Nueva Categoría
              </button>
            </div>
          </div>
        </div>

        <!-- Tabla de Categorías -->
        <div class="card">
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-striped table-hover">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Descripción</th>
                    <th>Productos</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody id="tablaCategorias">
                  <!-- Se llena dinámicamente -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Proveedores -->
      <div
        id="proveedores"
        class="seccion"
        style="display: none">
        <div class="row">
          <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h2><i class="bi bi-truck"></i> Gestión de Proveedores</h2>
              <button
                class="btn btn-warning"
                onclick="abrirModalProveedor()">
                <i class="bi bi-plus-circle"></i> Nuevo Proveedor
              </button>
            </div>
          </div>
        </div>

        <!-- Tabla de Proveedores -->
        <div class="card">
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-striped table-hover">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Contacto</th>
                    <th>Email</th>
                    <th>Teléfono</th>
                    <th>Productos</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody id="tablaProveedores">
                  <!-- Se llena dinámicamente -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Reportes -->
      <div
        id="reportes"
        class="seccion"
        style="display: none">
        <div class="row">
          <div class="col-12">
            <h2><i class="bi bi-graph-up"></i> Reportes y Estadísticas</h2>
            <p class="text-muted">Análisis detallado del inventario</p>
          </div>
        </div>

        <!-- Reportes por Categoría -->
        <div class="card mb-4">
          <div class="card-header">
            <h5><i class="bi bi-pie-chart"></i> Distribución por Categoría</h5>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th>Categoría</th>
                    <th>Productos</th>
                    <th>Stock Total</th>
                    <th>Valor Total</th>
                    <th>Porcentaje</th>
                  </tr>
                </thead>
                <tbody id="reporteCategoria">
                  <!-- Se llena dinámicamente -->
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Reportes por Proveedor -->
        <div class="card">
          <div class="card-header">
            <h5><i class="bi bi-bar-chart"></i> Distribución por Proveedor</h5>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th>Proveedor</th>
                    <th>Productos</th>
                    <th>Stock Total</th>
                    <th>Valor Total</th>
                    <th>Porcentaje</th>
                  </tr>
                </thead>
                <tbody id="reporteProveedor">
                  <!-- Se llena dinámicamente -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Producto -->
    <div
      class="modal fade"
      id="modalProducto"
      tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5
              class="modal-title"
              id="tituloModalProducto">
              Nuevo Producto
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <form id="formProducto">
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label
                      for="nombreProducto"
                      class="form-label"
                      >Nombre *</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="nombreProducto"
                      required />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label
                      for="precioProducto"
                      class="form-label"
                      >Precio *</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="precioProducto"
                      step="0.01"
                      required />
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label
                      for="stockProducto"
                      class="form-label"
                      >Stock *</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="stockProducto"
                      required />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label
                      for="categoriaProducto"
                      class="form-label"
                      >Categoría *</label
                    >
                    <select
                      class="form-select"
                      id="categoriaProducto"
                      required>
                      <option value="">Seleccionar categoría</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label
                      for="proveedorProducto"
                      class="form-label"
                      >Proveedor *</label
                    >
                    <select
                      class="form-select"
                      id="proveedorProducto"
                      required>
                      <option value="">Seleccionar proveedor</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label
                      for="estadoProducto"
                      class="form-label"
                      >Estado</label
                    >
                    <select
                      class="form-select"
                      id="estadoProducto">
                      <option value="true">Activo</option>
                      <option value="false">Inactivo</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="mb-3">
                <label
                  for="descripcionProducto"
                  class="form-label"
                  >Descripción</label
                >
                <textarea
                  class="form-control"
                  id="descripcionProducto"
                  rows="3"></textarea>
              </div>
              <input
                type="hidden"
                id="idProducto" />
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal">
              Cancelar
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="guardarProducto()">
              Guardar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Categoría -->
    <div
      class="modal fade"
      id="modalCategoria"
      tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5
              class="modal-title"
              id="tituloModalCategoria">
              Nueva Categoría
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <form id="formCategoria">
              <div class="mb-3">
                <label
                  for="nombreCategoria"
                  class="form-label"
                  >Nombre *</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="nombreCategoria"
                  required />
              </div>
              <div class="mb-3">
                <label
                  for="descripcionCategoria"
                  class="form-label"
                  >Descripción</label
                >
                <textarea
                  class="form-control"
                  id="descripcionCategoria"
                  rows="3"></textarea>
              </div>
              <div class="mb-3">
                <label
                  for="estadoCategoria"
                  class="form-label"
                  >Estado</label
                >
                <select
                  class="form-select"
                  id="estadoCategoria">
                  <option value="true">Activa</option>
                  <option value="false">Inactiva</option>
                </select>
              </div>
              <input
                type="hidden"
                id="idCategoria" />
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal">
              Cancelar
            </button>
            <button
              type="button"
              class="btn btn-success"
              onclick="guardarCategoria()">
              Guardar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Proveedor -->
    <div
      class="modal fade"
      id="modalProveedor"
      tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5
              class="modal-title"
              id="tituloModalProveedor">
              Nuevo Proveedor
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <form id="formProveedor">
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label
                      for="nombreProveedor"
                      class="form-label"
                      >Nombre *</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="nombreProveedor"
                      required />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label
                      for="contactoProveedor"
                      class="form-label"
                      >Contacto</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="contactoProveedor" />
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label
                      for="emailProveedor"
                      class="form-label"
                      >Email</label
                    >
                    <input
                      type="email"
                      class="form-control"
                      id="emailProveedor" />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label
                      for="telefonoProveedor"
                      class="form-label"
                      >Teléfono</label
                    >
                    <input
                      type="tel"
                      class="form-control"
                      id="telefonoProveedor" />
                  </div>
                </div>
              </div>
              <div class="mb-3">
                <label
                  for="direccionProveedor"
                  class="form-label"
                  >Dirección</label
                >
                <textarea
                  class="form-control"
                  id="direccionProveedor"
                  rows="2"></textarea>
              </div>
              <div class="mb-3">
                <label
                  for="estadoProveedor"
                  class="form-label"
                  >Estado</label
                >
                <select
                  class="form-select"
                  id="estadoProveedor">
                  <option value="true">Activo</option>
                  <option value="false">Inactivo</option>
                </select>
              </div>
              <input
                type="hidden"
                id="idProveedor" />
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal">
              Cancelar
            </button>
            <button
              type="button"
              class="btn btn-warning"
              onclick="guardarProveedor()">
              Guardar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
      <div
        id="toast"
        class="toast"
        role="alert">
        <div class="toast-header">
          <strong class="me-auto">Sistema de Inventario</strong>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="toast"></button>
        </div>
        <div
          class="toast-body"
          id="toastMessage">
          <!-- Mensaje del toast -->
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS -->
    <script src="script.js"></script>
  </body>
</html>
